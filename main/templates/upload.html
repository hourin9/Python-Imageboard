{% extends "base.html" %}
{% block title %} Upload {% endblock %}

{% block content %}
<h1>Upload</h1>
<div class="flex h-screen">
<div class="w-1/3 p-6 break-words overflow-y-auto">
    <img id="preview" src="" class="max-h-full max-w-full object-contain">
</div>

<div class="flex-1 pt-6">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        {{ form.non_field_errors }}

        <p>
            {{ form.image.label_tag }}
            {{ form.image }}
            {{ form.image.errors }}
        </p>

        <p>
            {{ form.tags.label_tag }}
            {{ form.tags }}
            {{ form.tags.errors }}
        </p>

        <button type="submit">Upload</button>
    </form>


    <a href="{% url 'index' %}" class="text-red-500 font-bold"
        >Back to board
    </a>
</div>
</div>

<script>
    const fileInput = document.querySelector('input[type="file"]');
    const preview = document.getElementById('preview');

    fileInput.addEventListener('change', () => {
        const file = fileInput.files[0];
        if (file) {
            preview.src = URL.createObjectURL(file);
            preview.style.display = 'block';
        } else {
            preview.src = "";
            preview.style.display = 'none';
        }
    });
</script>
{% endblock %}

